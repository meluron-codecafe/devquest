<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, maximum-scale=5.0">
<title>DevQuest</title>
<style>
    :root {
        --bg-color: #121212;
        --text-color: #e0e0e0;
        --container-bg: #1e1e1e;
        --border-color: #555;
        --hover-bg: #2a2a2a;
        --link-color: #fd8a09;
        --topic-link-color: #aad4ff;
        --table-header-bg: #2b2b2b;
        --quote-color: #bbb;
        --footer-color: #999;
        
        /* Typography scale */
        --font-size-xs: 12px;
        --font-size-sm: 13px;
        --font-size-base: 14px;
        --font-size-lg: 16px;
        --font-size-xl: 18px;
        --font-size-xxl: 20px;
        
        /* Spacing scale */
        --space-xs: 4px;
        --space-sm: 8px;
        --space-md: 12px;
        --space-lg: 16px;
        --space-xl: 20px;
        --space-2xl: 24px;
        --space-3xl: 32px;
        
        /* Touch targets */
        --touch-target: 44px;
        --touch-target-sm: 40px;
        
        /* Border radius */
        --radius-sm: 4px;
        --radius-md: 6px;
        --radius-lg: 8px;
        --radius-xl: 12px;
        --radius-2xl: 16px;
    }
    
    body.light-theme {
        --bg-color: #f2f2f2;
        --text-color: #333;
        --container-bg: #fff;
        --border-color: #ccc;
        --hover-bg: #fafafa;
        --link-color: #fd8a09;
        --topic-link-color: #0066cc;
        --table-header-bg: #f5f5f5;
        --quote-color: #777;
        --footer-color: #777;
    }

    * {
        box-sizing: border-box;
        -webkit-tap-highlight-color: rgba(0,0,0,0);
    }

    button:focus,
    a:focus,
    .filter-icon:focus,
    [role="button"]:focus {
        outline: none !important;
        box-shadow: none !important;
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        font-size: var(--font-size-base);
        line-height: 1.5;
        background-color: var(--bg-color);
        color: var(--text-color);
        margin: 0;
        padding: var(--space-xl);
        transition: background-color 0.3s ease, color 0.3s ease;
        overflow-x: hidden;
    }
    
    .container {
        max-width: 900px;
        margin: 0 auto;
        background: var(--container-bg);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-lg);
        padding: var(--space-2xl);
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        position: relative;
        transition: background 0.3s ease, border 0.3s ease;
    }
    
    .header {
        display: flex;
        justify-content: flex-start;
        align-items: center;
        margin-bottom: var(--space-2xl);
        position: relative;
        width: 100%;
        padding-top: 15px;
    }
    
    .logo {
        max-width: 150px;
        height: auto;
        display: block;
        transition: opacity 0.3s ease;
        margin-top: -23px;
    }

    /* ======= BUTTON CONTAINER - DESKTOP ======= */
    .button-container {
        position: absolute;
        top: -15px;
        right: -15px;
        background: rgba(45, 45, 45, 0.95);
        border: 2px solid var(--border-color);
        border-radius: var(--radius-xl);
        padding: 2px;
        display: flex;
        z-index: 1000;
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        align-items: center;
    }

    /* ======= SEARCH FUNCTIONALITY ======= */
    .search-container {
        position: relative;
        display: flex;
        align-items: center;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        min-width: 40px;
    }

    .button-container.search-expanded {
        padding-left: 240px;
    }

    .search-btn {
        background: transparent !important;
        color: var(--text-color);
        border: none !important;
        border-radius: 50%;
        width: var(--touch-target-sm);
        height: var(--touch-target-sm);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: var(--font-size-lg);
        transition: all 0.3s ease;
        text-decoration: none;
        flex-shrink: 0;
        z-index: 1002;
        position: relative;
        min-height: var(--touch-target-sm);
        min-width: var(--touch-target-sm);
    }

    .search-btn:hover {
        background: rgba(255, 255, 255, 0.1) !important;
        color: var(--text-color) !important;
        text-decoration: none !important;
    }

    .search-btn.active {
        background: rgba(255, 255, 255, 0.1) !important;
    }

    .search-input-container {
        position: absolute;
        right: 2px;
        top: 2px;
        height: 36px;
        width: 36px;
        overflow: visible;
        transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1), padding 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        background: transparent;
        border-radius: calc(var(--radius-xl) - 2px);
        display: flex;
        align-items: center;
        z-index: 1001;
        border: none;
    }

    .search-input-container.expanded {
        width: 270px;
        padding-left: 8px;
        padding-right: 44px;
    }

    .search-input {
        width: 100%;
        height: 32px;
        background: transparent;
        border: none;
        outline: none;
        color: var(--text-color);
        font-size: var(--font-size-sm);
        font-family: inherit;
        padding: 0;
        opacity: 0;
        transition: opacity 0.3s ease 0.1s;
        border-radius: 0;
    }

    .search-input-container.expanded .search-input {
        opacity: 1;
    }

    .search-input::placeholder {
        color: rgba(224, 224, 224, 0.5);
    }

    .search-input:focus {
        outline: none;
        box-shadow: none;
        background: transparent;
        border: none;
    }

    body.light-theme .button-container {
        background: rgba(255, 255, 255, 0.95);
        border-color: var(--border-color);
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }

    body.light-theme .search-input::placeholder {
        color: rgba(51, 51, 51, 0.5);
    }

    body.light-theme .search-btn:hover,
    body.light-theme .search-btn:focus {
        background: rgba(0, 0, 0, 0.05) !important;
    }
    
    /* ======= THEME TOGGLE BUTTON ======= */
    .theme-toggle-btn {
        background: transparent;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: var(--font-size-xl);
        transition: all 0.3s ease;
        color: var(--text-color);
        position: relative;
        overflow: hidden;
        min-height: var(--touch-target-sm);
        min-width: var(--touch-target-sm);
    }

    .theme-toggle-btn:hover {
        background: rgba(255, 255, 255, 0.1);
    }

    .theme-icon {
        position: absolute;
        opacity: 0;
        transform: scale(0.5) rotate(180deg);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex;
        align-items: center;
        justify-content: center;
        width: 24px;
        height: 24px;
    }

    .theme-icon.active {
        opacity: 1;
        transform: scale(1) rotate(0deg);
    }

    .theme-icon svg {
        width: 20px;
        height: 20px;
        stroke: currentColor;
        fill: none;
        transition: all 0.2s ease;
    }

    .github-btn, .about-btn {
        background: transparent !important;
        color: var(--text-color);
        border: none !important;
        border-radius: 50%;
        width: var(--touch-target-sm);
        height: var(--touch-target-sm);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: var(--font-size-lg);
        transition: all 0.3s ease;
        text-decoration: none;
        min-height: var(--touch-target-sm);
        min-width: var(--touch-target-sm);
    }

    .github-btn:hover, .about-btn:hover {
        background: rgba(255, 255, 255, 0.1) !important;
        color: var(--text-color) !important;
        text-decoration: none !important;
    }

    body.light-theme .theme-toggle-btn:hover,
    body.light-theme .github-btn:hover,
    body.light-theme .about-btn:hover {
        background: rgba(0, 0, 0, 0.05);
    }
    
    input {
        padding: var(--space-sm) var(--space-md);
        font-size: var(--font-size-base);
        font-family: inherit;
        border: 1px solid var(--border-color);
        border-radius: var(--radius-sm);
        background: var(--container-bg);
        color: var(--text-color);
        transition: all 0.3s ease;
        min-height: var(--touch-target);
    }
    
    input:focus {
        outline: none;
        border-color: var(--link-color);
        box-shadow: 0 0 0 2px rgba(78, 163, 255, 0.2);
    }
    
    .table-wrapper {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scroll-behavior: smooth;
        border-radius: var(--radius-lg);
    }
    
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: var(--space-md);
        border-radius: var(--radius-md);
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    th, td {
        border-bottom: 1px solid var(--border-color);
        padding: var(--space-md) var(--space-lg);
        text-align: left;
        font-size: var(--font-size-base);
        line-height: 1.4;
    }
    
    th {
        background-color: var(--table-header-bg);
        color: var(--text-color);
        font-weight: 600;
        font-size: var(--font-size-sm);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        position: relative;
    }
    
    tr:hover {
        background-color: var(--hover-bg);
    }
    
    tr:last-child td {
        border-bottom: none;
    }
    
    a {
        color: var(--link-color);
        text-decoration: none;
        transition: color 0.2s ease;
    }
    
    a:hover, a:focus {
        text-decoration: underline;
        color: #66b3ff;
        outline: none;
    }

    .category-header {
        display: flex;
        align-items: center;
        gap: var(--space-sm);
    }
    
    .filter-icon {
        display: inline-flex;
        justify-content: center;
        align-items: center;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        border: 1px solid #fd8a09;
        background: transparent;
        color: #fd8a09;
        cursor: pointer;
        transition: all 0.2s ease;
        padding: 2px;
    }
    
    .filter-icon:hover {
        background: #fd8a09;
        color: white;
    }

    .filter-icon.active {
        background: #fd8a09;
        color: white;
    }

    .filter-icon svg {
        width: 12px;
        height: 12px;
        stroke: currentColor;
        fill: none;
    }

    .category-filter-dropdown {
        position: absolute;
        background: var(--container-bg);
        border: 2px solid var(--border-color);
        border-radius: var(--radius-md);
        box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        z-index: 1000;
        max-width: 200px;
        font-size: var(--font-size-sm);
        line-height: 1.5;
        display: none;
        backdrop-filter: blur(10px);
        max-height: 50vh;
        overflow-y: auto;
    }
    
    .category-filter-dropdown.visible {
        display: block;
        animation: fadeInUp 0.3s ease;
    }

    .filter-option {
        padding: var(--space-md) var(--space-lg);
        cursor: pointer;
        transition: background-color 0.2s ease;
        border-bottom: 1px solid var(--border-color);
        min-height: var(--touch-target);
        display: flex;
        align-items: center;
    }

    .filter-option:last-child {
        border-bottom: none;
    }

    .filter-option:hover, .filter-option:focus {
        background-color: var(--hover-bg);
        outline: none;
    }

    .filter-option.active {
        background-color: var(--link-color);
        color: white;
    }

    .no-results {
        text-align: center;
        padding: var(--space-3xl);
        color: var(--quote-color);
        font-style: italic;
        border: 2px dashed var(--border-color);
        border-radius: var(--radius-lg);
        margin-top: var(--space-lg);
        font-size: var(--font-size-lg);
    }

    .no-results .request-link {
        color: var(--quote-color);
        text-decoration: underline;
        font-weight: normal;
        margin-top: var(--space-lg);
        display: inline-block;
        transition: color 0.3s ease;
        cursor: pointer;
        font-size: var(--font-size-base);
    }
    
    .no-results .request-link:hover, .no-results .request-link:focus {
        color: #fd8a09;
        outline: none;
    }

    .about-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 10000;
        backdrop-filter: blur(0px);
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
        padding: var(--space-lg);
    }

    .about-modal.visible {
        background: rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(5px);
        opacity: 1;
        visibility: visible;
    }

    .about-modal-content {
        background: var(--container-bg);
        border: 2px solid var(--border-color);
        border-radius: var(--radius-xl);
        padding: var(--space-2xl);
        max-width: 600px;
        width: 100%;
        max-height: calc(100vh - 2 * var(--space-lg));
        overflow-y: auto;
        position: relative;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        transform: scale(0.95);
        opacity: 0;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .about-modal.visible .about-modal-content {
        transform: scale(1);
        opacity: 1;
    }

    .about-modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--space-xl);
        padding-bottom: var(--space-lg);
        border-bottom: 2px solid var(--border-color);
    }

    .about-modal-title {
        font-size: var(--font-size-xl);
        font-weight: 600;
        color: var(--link-color);
        margin: 0;
        display: flex;
        align-items: center;
        gap: var(--space-md);
    }

    .about-modal-close {
        background: transparent;
        border: none;
        font-size: 24px;
        cursor: pointer;
        color: var(--text-color);
        width: var(--touch-target);
        height: var(--touch-target);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
    }

    .about-modal-close:hover, .about-modal-close:focus {
        background: var(--hover-bg);
        outline: none;
        transform: scale(1.1);
    }

    .about-modal-body {
        line-height: 1.6;
        color: var(--text-color);
        font-size: var(--font-size-base);
    }

    .about-section {
        margin-bottom: var(--space-xl);
    }

    .about-section:last-child {
        margin-bottom: 0;
    }

    .about-section h3 {
        font-size: var(--font-size-lg);
        font-weight: 600;
        color: var(--link-color);
        margin: 0 0 var(--space-md) 0;
        display: flex;
        align-items: center;
        gap: var(--space-sm);
    }

    .about-section p {
        margin: 0 0 var(--space-md) 0;
        color: var(--text-color);
        font-size: var(--font-size-base);
    }

    .about-section p:last-child {
        margin-bottom: 0;
    }

    .about-section ul {
        margin: var(--space-md) 0;
        padding-left: var(--space-xl);
    }

    .about-section li {
        margin-bottom: var(--space-sm);
        color: var(--text-color);
        font-size: var(--font-size-base);
    }

    .about-highlight {
        color: var(--link-color);
        font-weight: 600;
    }

    .about-tech-stack {
        display: flex;
        flex-wrap: wrap;
        gap: var(--space-sm);
        margin: var(--space-md) 0;
    }

    .tech-tag {
        background: rgba(77, 163, 255, 0.1);
        border: 1px solid rgba(77, 163, 255, 0.3);
        color: var(--link-color);
        padding: var(--space-sm) var(--space-md);
        border-radius: var(--radius-sm);
        font-size: var(--font-size-sm);
        font-weight: 500;
    }

    body.light-theme .tech-tag {
        background: rgba(77, 163, 255, 0.05);
        border-color: rgba(77, 163, 255, 0.2);
    }

    .preview-tooltip {
        position: absolute;
        background: var(--container-bg);
        border: 2px solid var(--border-color);
        border-radius: var(--radius-lg);
        padding: var(--space-lg);
        box-shadow: 0 12px 35px rgba(0,0,0,0.25);
        z-index: 1001;
        max-width: 500px;
        font-size: var(--font-size-sm);
        line-height: 1.4;
        display: none;
        backdrop-filter: blur(10px);
    }
    
    .preview-tooltip.visible {
        display: block;
        animation: fadeInUp 0.3s ease;
    }
    
    @keyframes fadeInUp {
        from { 
            opacity: 0; 
            transform: translateY(10px);
        }
        to { 
            opacity: 1; 
            transform: translateY(0);
        }
    }
    
    .preview-tooltip .preview-title {
        font-weight: 600;
        color: var(--link-color);
        margin-bottom: var(--space-md);
        font-size: var(--font-size-base);
        border-bottom: 1px solid var(--border-color);
        padding-bottom: var(--space-sm);
        display: flex;
        align-items: center;
        gap: var(--space-sm);
    }

    .preview-tooltip .quest-icon {
        color: #fd8a09;
        font-size: var(--font-size-lg);
    }
    
    .preview-tooltip .quest-section {
        margin-bottom: var(--space-md);
    }
    
    .preview-tooltip .quest-section:last-child {
        margin-bottom: 0;
    }
    
    .preview-tooltip .quest-list {
        list-style: none;
        padding: 0;
        margin: var(--space-sm) 0;
    }

    .preview-tooltip .quest-item {
        background: rgba(78, 163, 255, 0.05);
        border-left: 3px solid var(--link-color);
        margin: var(--space-xs) 0;
        padding: var(--space-sm) var(--space-md);
        border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
        color: var(--text-color);
        font-size: var(--font-size-sm);
        line-height: 1.4;
    }

    body.light-theme .preview-tooltip .quest-item {
        background: rgba(78, 163, 255, 0.03);
    }

    .preview-tooltip .quest-item .item-number {
        color: var(--link-color);
        font-weight: 600;
        margin-right: var(--space-xs);
    }
    
    .preview-tooltip .quest-content img {
        max-width: 100%;
        height: auto;
        max-height: 200px;
        border-radius: var(--radius-sm);
        margin: var(--space-sm) 0;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        object-fit: contain;
    }
    
    .preview-tooltip .loading {
        text-align: center;
        color: var(--quote-color);
        font-style: italic;
        font-size: var(--font-size-sm);
    }
    
    .preview-tooltip .error {
        text-align: center;
        color: #f87171;
        font-style: italic;
        font-size: var(--font-size-sm);
    }
    
    .footer {
        text-align: center;
        margin-top: var(--space-2xl);
        padding: var(--space-xl) var(--space-md);
        border-top: 1px solid var(--border-color);
        color: var(--footer-color);
        font-size: var(--font-size-base);
        line-height: 1.6;
    }
    
    .footer a {
        color: #fd8a09;
        text-decoration: none;
        font-weight: 500;
        padding: var(--space-xs);
        border-radius: var(--radius-sm);
        min-height: var(--touch-target);
        display: inline-flex;
        align-items: center;
    }
    
    .footer a:hover, .footer a:focus {
        text-decoration: underline;
        outline: none;
    }
    
    #tutorialTable a {
        color: var(--topic-link-color);
        text-decoration: none;
        font-weight: 500;
        transition: all 0.2s ease;
    }
    
    #tutorialTable a:hover, #tutorialTable a:focus {
        text-decoration: underline;
        color: #4ea3ff;
    }
    
    .category {
        font-weight: 600;
        font-size: var(--font-size-sm);
        letter-spacing: 0.5px;
    }
    
    /* ======= MOBILE & TABLET RESPONSIVE DESIGN ======= */
    @media screen and (max-width: 768px) {
        :root {
            --font-size-base: 16px;
            --font-size-lg: 18px;
            --font-size-xl: 20px;
            --font-size-xxl: 22px;
            --space-md: 16px;
            --space-lg: 20px;
            --space-xl: 24px;
            --space-2xl: 28px;
            --space-3xl: 36px;
        }

        body {
            padding: var(--space-md) !important;
            font-size: var(--font-size-base) !important;
        }
        
        .container {
            padding: var(--space-lg) !important;
            margin: 0 !important;
            border-radius: var(--radius-lg) !important;
        }
        
        .header {
            display: flex !important;
            justify-content: space-between !important;
            align-items: center !important;
            margin-bottom: var(--space-2xl) !important;
            padding-top: 15px !important;
            position: relative !important;
        }
        
        .logo {
            max-width: 75px !important;
            height: auto !important;
            margin-top: 0 !important;
        }
        
        /* MOBILE BUTTON CONTAINER */
        .button-container {
            position: static !important;
            top: auto !important;
            right: auto !important;
            background: rgba(45, 45, 45, 0.95) !important;
            border: 2px solid var(--border-color) !important;
            border-radius: 10px !important;
            padding: 4px !important;
            display: flex !important;
            flex-direction: row !important;
            gap: 4px !important;
            width: auto !important;
            justify-content: center !important;
            box-shadow: 0 4px 16px rgba(0,0,0,0.15) !important;
            z-index: 1000 !important;
            backdrop-filter: blur(10px) !important;
            transform: none !important;
        }

        body.light-theme .button-container {
            background: rgba(255, 255, 255, 0.98) !important;
            box-shadow: 0 6px 24px rgba(0,0,0,0.12) !important;
        }

        .button-container.search-expanded {
            padding-left: 140px !important;
        }

        .search-container {
            position: relative !important;
            display: flex !important;
            align-items: center !important;
            min-width: 36px !important;
            height: 36px !important;
        }

        .search-input-container {
            position: absolute !important;
            right: 0px !important;
            top: 0px !important;
            height: 36px !important;
            width: 36px !important;
            min-width: 36px !important;
            min-height: 36px !important;
            border-radius: 8px !important;
        }

        .search-input-container.expanded {
            width: 160px !important;
            padding-left: 10px !important;
            padding-right: 36px !important;
        }

        .search-input {
            width: 100% !important;
            height: calc(36px - 8px) !important;
            background: transparent !important;
            border: none !important;
            outline: none !important;
            color: var(--text-color) !important;
            font-size: var(--font-size-sm) !important;
            font-family: inherit !important;
            padding: 0 !important;
            opacity: 0 !important;
            transition: opacity 0.3s ease 0.1s !important;
            border-radius: 0 !important;
        }

        .search-input-container.expanded .search-input {
            opacity: 1 !important;
        }

        /* Mobile button sizes */
        #searchBtn,
        #aboutBtn, 
        #themeToggle,
        .github-btn {
            width: 36px !important;
            height: 36px !important;
            min-width: 36px !important;
            min-height: 36px !important;
            max-width: 36px !important;
            max-height: 36px !important;
            font-size: 16px !important;
            border-radius: 8px !important;
            padding: 0 !important;
            margin: 0 !important;
            box-sizing: border-box !important;
            position: relative !important;
            flex-shrink: 0 !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }
        
        #searchBtn svg,
        #aboutBtn svg,
        #themeToggle svg,
        .github-btn svg {
            width: 20px !important;
            height: 20px !important;
            flex-shrink: 0 !important;
        }

        .filter-icon {
            width: 24px !important;
            height: 24px !important;
            min-width: var(--touch-target-sm) !important;
            min-height: var(--touch-target-sm) !important;
        }
        
        .filter-icon:hover {
            background: #fd8a09 !important;
            color: white !important;
            transform: scale(1.05) !important;
        }
        
        .category-filter-dropdown {
            max-width: 320px !important;
            font-size: var(--font-size-base) !important;
        }
        
        /* Only center for phones, not tablets */
        @media screen and (max-width: 480px) {
            .category-filter-dropdown {
                left: 50% !important;
                transform: translateX(-50%) !important;
            }
        }
        
        .table-wrapper {
            overflow-x: auto !important;
            -webkit-overflow-scrolling: touch !important;
            margin: var(--space-lg) 0 !important;
            border-radius: var(--radius-lg) !important;
            box-shadow: 0 2px 12px rgba(0,0,0,0.1) !important;
        }
        
        table {
            min-width: 650px !important;
            margin: 0 !important;
        }
        
        th, td {
            padding: var(--space-lg) var(--space-md) !important;
            font-size: var(--font-size-base) !important;
            white-space: nowrap !important;
        }

        th:first-child, td:first-child {
            min-width: 100px !important;
        }

        th:nth-child(2), td:nth-child(2) {
            min-width: 250px !important;
            white-space: normal !important;
        }

        th:nth-child(3), td:nth-child(3) {
            min-width: 180px !important;
            white-space: normal !important;
        }

        .about-modal {
            padding: var(--space-md) !important;
            z-index: 11000 !important;
        }

        .about-modal-content {
            width: calc(100vw - 4 * var(--space-md)) !important;
            max-width: calc(100vw - 4 * var(--space-md)) !important;
            padding: var(--space-lg) !important;
            max-height: calc(100vh - 4 * var(--space-md)) !important;
            border-radius: var(--radius-lg) !important;
            margin: 0 auto !important;
        }

        .about-modal-title {
            font-size: var(--font-size-lg) !important;
        }

        .about-section h3 {
            font-size: var(--font-size-base) !important;
        }

        .preview-tooltip {
            max-width: calc(100vw - 2 * var(--space-md)) !important;
            left: var(--space-md) !important;
            right: var(--space-md) !important;
            font-size: var(--font-size-xs) !important;
            padding: var(--space-md) !important;
            border-radius: var(--radius-md) !important;
            z-index: 10500 !important;
            position: fixed !important;
        }

        .preview-tooltip .preview-title {
            font-size: var(--font-size-sm) !important;
            margin-bottom: var(--space-sm) !important;
            padding-bottom: var(--space-xs) !important;
        }

        .preview-tooltip .quest-section {
            margin-bottom: var(--space-sm) !important;
        }

        .preview-tooltip .quest-item,
        .preview-tooltip div[style*="margin: 8px 0"] {
            margin: var(--space-xs) 0 !important;
            padding: var(--space-xs) var(--space-sm) !important;
            font-size: var(--font-size-xs) !important;
            line-height: 1.3 !important;
        }

        .preview-tooltip .loading,
        .preview-tooltip .error {
            font-size: var(--font-size-xs) !important;
            padding: var(--space-sm) !important;
        }

        .preview-tooltip .quest-content img {
            max-height: 100px !important;
            margin: var(--space-xs) 0 !important;
        }

        .footer {
            font-size: var(--font-size-sm) !important;
            padding: var(--space-lg) var(--space-sm) !important;
            line-height: 1.4 !important;
        }

        .footer a {
            font-size: var(--font-size-sm) !important;
            padding: var(--space-xs) var(--space-sm) !important;
            min-height: var(--touch-target-sm) !important;
        }

        .no-results {
            padding: var(--space-2xl) !important;
            font-size: var(--font-size-lg) !important;
        }

        .no-results .request-link {
            font-size: var(--font-size-base) !important;
            padding: var(--space-lg) !important;
            margin-top: var(--space-xl) !important;
            min-height: var(--touch-target) !important;
        }
    }

    @media screen and (max-width: 480px) {
        body {
            padding: var(--space-sm) !important;
        }

        .container {
            padding: var(--space-md) !important;
            border-radius: var(--radius-md) !important;
        }

        /* FORCE MOBILE LOGO SIZE - PHONES */
        .header .logo {
            max-width: 75px !important;
        }

        .header .button-container {
            gap: 3px !important;
            padding: 3px !important;
        }

        .container .header .search-input-container.expanded .search-input {
            opacity: 1 !important;
            height: calc(36px - 8px) !important;
            font-size: var(--font-size-sm) !important;
            background: transparent !important;
        }

        /* Force consistent button sizes on phones */
        .container .header #searchBtn,
        .container .header #aboutBtn, 
        .container .header #themeToggle,
        .container .header .github-btn {
            width: 36px !important;
            height: 36px !important;
            min-width: 36px !important;
            min-height: 36px !important;
            border-radius: 8px !important;
        }

        .container {
            padding: var(--space-md) !important;
            border-radius: var(--radius-md) !important;
        }

        .logo {
            max-width: 150px !important;
        }

        .button-container {
            gap: 4px !important;
            padding: 4px !important;
        }

        .button-container.search-expanded {
            padding-left: 120px !important;
        }

        .search-input-container.expanded {
            width: 140px !important;
        }

        .about-modal {
            padding: var(--space-lg) var(--space-sm) !important;
            z-index: 11000 !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }

        .about-modal-content {
            width: calc(100vw - 6 * var(--space-sm)) !important;
            max-width: calc(100vw - 6 * var(--space-sm)) !important;
            padding: var(--space-md) !important;
            max-height: calc(100vh - 8 * var(--space-lg)) !important;
            margin: var(--space-lg) 0 !important;
            position: relative !important;
        }

    }

    /* Ultra-small screens - bigger container expansion for search box */
    @media screen and (max-width: 400px) {
        /* Bigger container expansion to properly fit 140px search box */
        .container .header .button-container.search-expanded {
            padding-left: 100px !important;
        }

        .container .header .search-input-container.expanded {
            width: 140px !important;
            padding-left: 10px !important;
            padding-right: 36px !important;
            background: transparent !important;
            border-radius: 8px !important;
            overflow: hidden !important;
        }

        .container .header .search-input-container.expanded .search-input {
            opacity: 1 !important;
            background: transparent !important;
        }

        table, thead, tbody, th, td, tr {
            display: block !important;
        }
        
        table {
            min-width: auto !important;
        }
        
        thead tr {
            position: absolute !important;
            top: -9999px !important;
            left: -9999px !important;
        }
        
        tr {
            border: 1px solid var(--border-color) !important;
            border-radius: var(--radius-sm) !important;
            margin-bottom: var(--space-sm) !important;
            padding: var(--space-sm) !important;
            background: var(--container-bg) !important;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1) !important;
        }
        
        td {
            border: none !important;
            border-bottom: 1px solid rgba(255,255,255,0.05) !important;
            position: relative !important;
            padding: var(--space-xs) 0 !important;
            white-space: normal !important;
            min-width: auto !important;
            display: block !important;
        }
        
        td:before {
            content: attr(data-label) !important;
            display: block !important;
            font-weight: 600 !important;
            color: var(--quote-color) !important;
            font-size: 11px !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
            margin-bottom: 2px !important;
        }
        
        td:last-child {
            border-bottom: none !important;
            padding-bottom: 0 !important;
        }

        td[data-label="Category"]:before {
            color: var(--quote-color) !important;
        }
        
        td[data-label="Topic"] a {
            font-size: var(--font-size-sm) !important;
            font-weight: 500 !important;
            line-height: 1.3 !important;
            display: block !important;
            padding: 2px 0 !important;
        }
        
        td[data-label="Keywords"] {
            font-size: 12px !important;
            color: var(--quote-color) !important;
            font-style: italic !important;
            line-height: 1.2 !important;
        }
        
        .container {
            padding: var(--space-xs) !important;
        }
        
        .header {
            gap: var(--space-sm) !important;
            margin-bottom: var(--space-md) !important;
        }
        
        .table-wrapper {
            margin: var(--space-sm) 0 !important;
        }
    }

    /* Reduce motion for users who prefer it */
    @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
            scroll-behavior: auto !important;
        }
    }
</style>
</head>
<body>
<div class="container">
    <!-- Header -->
    <div class="header">
        <img src="https://raw.githubusercontent.com/meluron/assets/refs/heads/main/logos/meluron-codecafe/DevQuest/icon_with_text.png" class="logo" id="logo" alt="DevQuest Logo">
        <div class="button-container">
            <!-- Search functionality -->
            <div class="search-container">
                <div class="search-input-container" id="searchInputContainer">
                    <input type="text" class="search-input" id="searchBox" placeholder="Search..." aria-label="Search tutorials">
                </div>
                <button id="searchBtn" class="search-btn" title="Search" aria-label="Toggle search">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                </button>
            </div>
            
            <button id="aboutBtn" class="about-btn" title="About DevQuest" aria-label="About DevQuest">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M12 16v-4"></path>
                    <path d="M12 8h.01"></path>
                </svg>
            </button>
            
            <button id="themeToggle" class="theme-toggle-btn" title="Toggle theme" aria-label="Toggle dark/light theme">
                <div class="theme-icon dark">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </div>
                <div class="theme-icon light">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </div>
            </button>
            <a href="https://github.com/meluron-codecafe/DevQuest" target="_blank" class="github-btn" title="View on GitHub" aria-label="View DevQuest on GitHub">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
            </a>
        </div>
    </div>

    <div class="table-wrapper">
        <table id="tutorialTable">
            <thead>
                <tr>
                    <th>
                        <div class="category-header">
                            Category
                            <span class="filter-icon" id="categoryFilter" title="Filter by category" aria-label="Filter by category" tabindex="0" role="button">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polygon points="22,3 2,3 10,12.46 10,19 14,21 14,12.46"></polygon>
                                </svg>
                            </span>
                        </div>
                    </th>
                    <th>Topic</th>
                    <th>Keywords</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <!-- No results message -->
    <div id="noResults" class="no-results" style="display: none;">
        <div>No tutorials found for your search.</div>
        <span id="requestTopicLink" class="request-link" role="button" tabindex="0">Click here to request this topic</span>
    </div>

    <!-- About modal -->
    <div id="aboutModal" class="about-modal" role="dialog" aria-labelledby="aboutModalTitle" aria-hidden="true">
        <div class="about-modal-content">
            <div class="about-modal-header">
                <h2 class="about-modal-title" id="aboutModalTitle">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <path d="M12 16v-4"></path>
                        <path d="M12 8h.01"></path>
                    </svg>
                    About Section
                </h2>
                <button class="about-modal-close" id="aboutModalClose" aria-label="Close about modal">&times;</button>
            </div>
            <div class="about-modal-body">
                <div class="about-section">
                    <p><b>Motto</b>: </p>
                    <p>Implementing Research</p>
                    
                    <p><b>Mission</b>:</p>
                    <p>At devQuest, our mission is to help learners, developers, and researchers gain the skills to convert research papers into working prototypes.</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Category filter dropdown -->
    <div id="categoryFilterDropdown" class="category-filter-dropdown" role="listbox"></div>
    
    <!-- Preview tooltip for topics -->
    <div id="previewTooltip" class="preview-tooltip" role="tooltip"></div>
    
</div>
    
<div class="footer">
    An initiative by <a href="https://github.com/meluron" target="_blank">meluron</a> to bring context to learning.
</div>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<script>
    // Category colors for dark theme
    const categoryColorsDark = [
        "#fd8a09", "#4ade80", "#60a5fa", "#f472b6", "#facc15", "#a78bfa", "#34d399", "#f87171"
    ];
    
    // Category colors for light theme
    const categoryColorsLight = [
        "#dc6803", "#15803d", "#2563eb", "#db2777", "#ca8a04", "#7c3aed", "#0f766e", "#dc2626"
    ];
    
    let tutorials = [];
    let currentCategoryFilter = ''; // DEFAULT TO All Categories
    let searchExpanded = false;
    
    const categoryColorMap = {};
    
    function assignCategoryColors() {
        const uniqueCategories = [...new Set(tutorials.map(t => t.category))].sort();
        const colors = currentTheme === 'light' ? categoryColorsLight : categoryColorsDark;
        uniqueCategories.forEach((cat, idx) => {
            categoryColorMap[cat] = colors[idx % colors.length];
        });
    }
    
    // Initialize mobile logo and layout
    function initializeMobileLayout() {
        const logo = document.getElementById('logo');
        const isMobile = window.innerWidth <= 768;
        
        if (logo) {
            if (isMobile) {
                logo.src = 'https://raw.githubusercontent.com/meluron/assets/refs/heads/main/logos/meluron-codecafe/DevQuest/icon.png';
                logo.alt = 'DevQuest';
            } else {
                logo.src = 'https://raw.githubusercontent.com/meluron/assets/refs/heads/main/logos/meluron-codecafe/DevQuest/icon_with_text.png';
                logo.alt = 'DevQuest Logo';
            }
        }
    }
    
    // Update logo on window resize
    window.addEventListener('resize', initializeMobileLayout);
    
    // Initialize on page load
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeMobileLayout);
    } else {
        initializeMobileLayout();
    }
    
    let searchBtn, searchInputContainer, searchBox;
    
    function initializeSearch() {
        searchBtn = document.getElementById("searchBtn");
        searchInputContainer = document.getElementById("searchInputContainer");
        searchBox = document.getElementById("searchBox");
        
        if (searchBtn && searchInputContainer && searchBox) {
            searchBtn.addEventListener("click", function(e) {
                e.preventDefault();
                e.stopPropagation();
                toggleSearch();
            });
            
            searchBtn.addEventListener("touchend", function(e) {
                e.preventDefault();
                e.stopPropagation();
                toggleSearch();
            });
            
            searchBtn.addEventListener("keydown", function(e) {
                if (e.key === "Enter" || e.key === " ") {
                    e.preventDefault();
                    toggleSearch();
                }
            });

            searchBox.addEventListener("click", function(e) {
                if (window.innerWidth <= 768 && !searchExpanded) {
                    e.preventDefault();
                    toggleSearch();
                }
            });
        }
    }
    
    function toggleSearch() {
        searchExpanded = !searchExpanded;
        
        const buttonContainer = document.querySelector('.button-container');
        const isMobile = window.innerWidth <= 768;
        
        console.log('Search toggled:', searchExpanded, 'Mobile:', isMobile); // Debug log
        
        if (searchExpanded) {
            searchInputContainer.classList.add("expanded");
            searchBtn.classList.add("active");
            buttonContainer.classList.add("search-expanded");
            
            // Force focus after animation
            setTimeout(() => {
                searchBox.focus();
                if (isMobile) {
                    searchBox.click();
                }
            }, isMobile ? 100 : 300);
        } else {
            searchInputContainer.classList.remove("expanded");
            searchBtn.classList.remove("active");
            buttonContainer.classList.remove("search-expanded");
            searchBox.blur();
        }
        
        console.log('Classes applied:', {
            expanded: searchInputContainer.classList.contains('expanded'),
            active: searchBtn.classList.contains('active'),
            searchExpanded: buttonContainer.classList.contains('search-expanded')
        }); // Debug log
    }
    
    // Enhanced click outside behavior
    document.addEventListener("click", (e) => {
        if (searchBtn && searchInputContainer && 
            !searchBtn.contains(e.target) && !searchInputContainer.contains(e.target)) {
            if (searchExpanded) {
                searchExpanded = false;
                searchInputContainer.classList.remove("expanded");
                searchBtn.classList.remove("active");
                document.querySelector('.button-container').classList.remove("search-expanded");
            }
        }
    });
    
    document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && searchExpanded) {
            toggleSearch();
        }
    });
    
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeSearch);
    } else {
        initializeSearch();
    }
    
    // Theme management
    let currentTheme = 'dark';
    
    const themeToggle = document.getElementById("themeToggle");
    const themeIcons = {
        dark: document.querySelector(".theme-icon.dark"),
        light: document.querySelector(".theme-icon.light")
    };
    
    function getSystemTheme() {
        return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    }
    
    function applyTheme(theme) {
        document.body.classList.remove('light-theme', 'dark-theme');
        
        if (theme === 'light') {
            document.body.classList.add('light-theme');
        } else {
            document.body.classList.add('dark-theme');
        }
    }
    
    function updateThemeToggle() {
        Object.keys(themeIcons).forEach(function(key) {
            themeIcons[key].classList.remove('active');
        });
        
        themeIcons[currentTheme].classList.add('active');
        
        var themeNames = {
            dark: 'Theme: Dark',
            light: 'Theme: Light'
        };
        themeToggle.title = themeNames[currentTheme];
    }
    
    function toggleTheme() {
        currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
        
        applyTheme(currentTheme);
        updateThemeToggle();
        
        if (tutorials.length > 0) {
            assignCategoryColors();
            renderTable();
            setTimeout(addPreviewListeners, 100);
        }
        
        localStorage.setItem('theme-preference', currentTheme);
    }
    
    themeToggle.addEventListener("click", toggleTheme);
    
    themeToggle.addEventListener("keydown", function(e) {
        if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            toggleTheme();
        }
    });
    
    currentTheme = getSystemTheme();
    applyTheme(currentTheme);
    updateThemeToggle();
    
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
        currentTheme = getSystemTheme();
        applyTheme(currentTheme);
        updateThemeToggle();
        
        if (tutorials.length > 0) {
            assignCategoryColors();
            renderTable();
            setTimeout(addPreviewListeners, 100);
        }
        
        localStorage.removeItem('theme-preference');
    });
    
    // About modal with enhanced accessibility
    const aboutBtn = document.getElementById("aboutBtn");
    const aboutModal = document.getElementById("aboutModal");
    const aboutModalClose = document.getElementById("aboutModalClose");
    
    aboutBtn.addEventListener("click", openAboutModal);
    aboutBtn.addEventListener("keydown", function(e) {
        if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            openAboutModal();
        }
    });
    
    function openAboutModal() {
        aboutModal.classList.add("visible");
        aboutModal.setAttribute("aria-hidden", "false");
        document.body.style.overflow = "hidden";
        aboutModalClose.focus();
    }
    
    function closeAboutModal() {
        aboutModal.classList.remove("visible");
        aboutModal.setAttribute("aria-hidden", "true");
        document.body.style.overflow = "";
        aboutBtn.focus();
    }
    
    aboutModalClose.addEventListener("click", closeAboutModal);
    aboutModalClose.addEventListener("keydown", function(e) {
        if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            closeAboutModal();
        }
    });
    
    aboutModal.addEventListener("click", (e) => {
        if (e.target === aboutModal) {
            closeAboutModal();
        }
    });
    
    document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && aboutModal.classList.contains("visible")) {
            closeAboutModal();
        }
    }); 

    // Add shake animation CSS
    const shakeStyle = document.createElement('style');
    shakeStyle.textContent = `
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-4px); }
            75% { transform: translateX(4px); }
        }
    `;
    document.head.appendChild(shakeStyle);
    
    // Category filter with PASSWORD PROTECTION
    const categoryFilterIcon = document.getElementById("categoryFilter");
    const categoryFilterDropdown = document.getElementById("categoryFilterDropdown");
    let filterDropdownVisible = false;
    
    categoryFilterIcon.addEventListener("click", handleCategoryFilterToggle);
    categoryFilterIcon.addEventListener("keydown", function(e) {
        if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            handleCategoryFilterToggle(e);
        }
    });
    
    function handleCategoryFilterToggle(e) {
        e.preventDefault();
        e.stopPropagation();
        
        if (filterDropdownVisible) {
            hideCategoryFilter();
        } else {
            showCategoryFilterDropdown(categoryFilterIcon)
        }
    }
    
    function showCategoryFilterDropdown(triggerElement = null) {
        const categories = [...new Set(tutorials.map(t => t.category))].sort();
        let dropdownContent = `<div class="filter-option ${currentCategoryFilter === '' ? 'active' : ''}" data-category="" role="option">All Categories</div>`;
        
        categories.forEach(cat => {
            dropdownContent += `<div class="filter-option ${currentCategoryFilter === cat ? 'active' : ''}" data-category="${cat}" role="option">${cat}</div>`;
        });
        
        categoryFilterDropdown.innerHTML = dropdownContent;
        
        // Use the trigger element or fall back to the category filter icon
        const referenceElement = triggerElement || categoryFilterIcon;
        const rect = referenceElement.getBoundingClientRect();
        const container = document.querySelector('.container');
        const containerRect = container.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        
        // Position dropdown - simplified since mobile button is removed
        if (viewportWidth <= 480) {
            categoryFilterDropdown.style.left = "50%";
            categoryFilterDropdown.style.transform = "translateX(-50%)";
            categoryFilterDropdown.style.top = (rect.bottom - containerRect.top + 8) + "px";
        } else if (viewportWidth <= 768) {
            categoryFilterDropdown.style.left = (rect.left - containerRect.left - 50) + "px";
            categoryFilterDropdown.style.top = (rect.bottom - containerRect.top + 8) + "px";
            categoryFilterDropdown.style.transform = "none";
        } else {
            categoryFilterDropdown.style.left = (rect.left - containerRect.left) + "px";
            categoryFilterDropdown.style.top = (rect.bottom - containerRect.top + 5) + "px";
            categoryFilterDropdown.style.transform = "none";
        }
        
        categoryFilterDropdown.classList.add("visible");
        categoryFilterIcon.classList.add("active");
        filterDropdownVisible = true;
        
        categoryFilterDropdown.querySelectorAll('.filter-option').forEach(option => {
            option.addEventListener('click', handleFilterOptionClick);
            option.addEventListener('keydown', function(e) {
                if (e.key === "Enter" || e.key === " ") {
                    e.preventDefault();
                    handleFilterOptionClick.call(this, e);
                }
            });
            option.setAttribute('tabindex', '0');
        });
    }
    
    function handleFilterOptionClick(e) {
        const category = e.target.getAttribute('data-category');
        currentCategoryFilter = category;
        renderTable();
        setTimeout(addPreviewListeners, 100);
        hideCategoryFilter();
    }
    
    function hideCategoryFilter() {
        categoryFilterDropdown.classList.remove("visible");
        categoryFilterIcon.classList.remove("active");
        filterDropdownVisible = false;
    }
    
    document.addEventListener("click", (e) => {
        if (!categoryFilterIcon.contains(e.target) && !categoryFilterDropdown.contains(e.target)) {
            hideCategoryFilter();
        }
    });
    
    // Enhanced preview functionality with image path fixing
    const previewTooltip = document.getElementById("previewTooltip");
    let previewCache = new Map();
    let previewTimeout;
    let currentPreviewTarget = null;

    function fixImagePaths(htmlContent, filename) {
        const parser = new DOMParser();
        const doc = parser.parseFromString(htmlContent, 'text/html');
        
        const images = doc.querySelectorAll('img');
        
        images.forEach(img => {
            const src = img.getAttribute('src');
            if (src && src.startsWith('../')) {
                const newSrc = src.replace('../', '');
                img.setAttribute('src', newSrc);
            }
        });
        
        return doc.documentElement.innerHTML;
    }

    // FIXED EXTRACT QUEST CONTENT FUNCTION
    function extractQuestContent(htmlContent, filename) {
        const parser = new DOMParser();
        const doc = parser.parseFromString(htmlContent, 'text/html');
        
        let questItems = [];
        let questImages = [];
        let authors = [];
        
        // Enhanced quest detection - more flexible text matching
        function isQuestHeading(text) {
            const cleanText = text.trim().toUpperCase()
                .replace(//g, '')
                .replace(/:/g, '')
                .replace(/\s+/g, ' ');
            
            return cleanText === 'QUEST' || 
                   cleanText === 'QUESTS' || 
                   cleanText.startsWith('QUEST ') ||
                   cleanText.endsWith(' QUEST') ||
                   cleanText.includes('QUEST:');
        }
        
        // Enhanced author detection
        function isAuthorHeading(text) {
            const cleanText = text.trim().toUpperCase()
                .replace(//g, '')
                .replace(/:/g, '')
                .replace(/\s+/g, ' ');
            
            return cleanText === 'AUTHOR' || 
                   cleanText === 'AUTHORS' || 
                   cleanText === 'AUTHOR(S)' ||
                   cleanText === 'AUTHORS(S)' ||
                   cleanText.startsWith('AUTHOR ') ||
                   cleanText.startsWith('AUTHORS ') ||
                   cleanText.includes('AUTHOR:') ||
                   cleanText.includes('AUTHORS:');
        }
        
        // Check if content looks like code/CSS/JS (add this helper function)
        function looksLikeCode(text) {
            const codePatterns = [
                /^\s*[\{\}]/,                    // CSS braces
                /^\s*[\.#][a-zA-Z-_]/,          // CSS selectors
                /^\s*\/\*.*\*\//,               // CSS comments
                /^\s*function\s*\(/,            // JavaScript functions
                /^\s*var\s+|let\s+|const\s+/,  // JavaScript variables
                /^\s*if\s*\(|while\s*\(|for\s*\(/,  // Control structures
                /^\s*<[a-zA-Z]/,                // HTML tags
                /^\s*[a-zA-Z-]+\s*:\s*[^;]*;/,  // CSS properties
                /===+/,                         // Comment separators
                /^\s*\/\/|^\s*#/,              // Comments
                /\w+\(\)/,                      // Function calls
                /\w+\.\w+/                      // Method calls or properties
            ];
            
            return codePatterns.some(pattern => pattern.test(text.trim()));
        }
        
        // Check if content is meaningful Quest content
        function isMeaningfulQuestContent(text) {
            const cleanText = text.trim();
            
            // Too short or too long
            if (cleanText.length < 10 || cleanText.length > 500) {
                return false;
            }
            
            // Looks like code
            if (looksLikeCode(cleanText)) {
                return false;
            }
            
            // Contains too many technical symbols
            const symbolRatio = (cleanText.match(/[\{\}\[\]();:]/g) || []).length / cleanText.length;
            if (symbolRatio > 0.1) {
                return false;
            }
            
            // Should contain some common words
            const commonWords = ['the', 'and', 'to', 'of', 'a', 'in', 'is', 'it', 'you', 'that', 'he', 'was', 'for', 'on', 'are', 'as', 'with', 'his', 'they', 'be', 'at', 'have', 'this', 'from', 'or', 'one', 'had', 'by', 'word', 'but', 'not', 'what', 'all', 'were', 'we', 'when', 'your', 'can', 'said', 'there', 'each', 'which', 'she', 'do', 'how', 'their', 'if', 'will', 'up', 'other', 'about', 'out', 'many', 'then', 'them', 'these', 'so', 'some', 'her', 'would', 'make', 'like', 'into', 'him', 'has', 'two', 'more', 'go', 'no', 'way', 'could', 'my', 'than', 'first', 'been', 'call', 'who', 'its', 'now', 'find', 'long', 'down', 'day', 'did', 'get', 'come', 'made', 'may', 'part'];
            const words = cleanText.toLowerCase().split(/\s+/);
            const hasCommonWords = words.some(word => commonWords.includes(word));
            
            return hasCommonWords;
        }
        
        // First, try to find quest content by heading
        const headings = doc.querySelectorAll('h1, h2, h3, h4, h5, h6');
        let questContainer = null;
        let foundQuestHeading = false;
        
        for (let heading of headings) {
            const headingText = heading.textContent || heading.innerText || '';
            
            if (isQuestHeading(headingText)) {
                foundQuestHeading = true;
                console.log(`Found quest heading: "${headingText}"`);
                
                // Strategy 1: Look for next meaningful sibling
                let nextElement = heading.nextElementSibling;
                while (nextElement) {
                    // Skip empty elements
                    if (nextElement.textContent.trim().length === 0) {
                        nextElement = nextElement.nextElementSibling;
                        continue;
                    }
                    
                    // Found content - check if it's another heading
                    if (nextElement.tagName && nextElement.tagName.match(/^H[1-6]$/)) {
                        break; // Stop if we hit another heading
                    }
                    
                    // Check if this is meaningful quest content
                    const elementText = nextElement.textContent.trim();
                    if (elementText.length > 0 && isMeaningfulQuestContent(elementText)) {
                        questContainer = nextElement;
                        break;
                    }
                    
                    nextElement = nextElement.nextElementSibling;
                }
                
                // Strategy 2: If no sibling found, collect all content until next heading
                if (!questContainer) {
                    const parentElement = heading.parentElement;
                    if (parentElement) {
                        let foundHeading = false;
                        let contentElements = [];
                        
                        for (let child of parentElement.children) {
                            if (child === heading) {
                                foundHeading = true;
                                continue;
                            }
                            
                            if (foundHeading) {
                                // Stop at next heading
                                if (child.tagName && child.tagName.match(/^H[1-6]$/)) {
                                    break;
                                }
                                
                                // Only collect meaningful content
                                const childText = child.textContent.trim();
                                if (childText.length > 0 && isMeaningfulQuestContent(childText)) {
                                    contentElements.push(child);
                                }
                            }
                        }
                        
                        if (contentElements.length > 0) {
                            questContainer = doc.createElement('div');
                            contentElements.forEach(el => questContainer.appendChild(el.cloneNode(true)));
                        }
                    }
                }
                
                if (questContainer) {
                    break; // Found quest content, stop looking
                }
            }
        }
        
        // Fallback: Search for quest content by text patterns (only if no heading found yet)
        if (!foundQuestHeading && !questContainer) {
            console.log('No quest heading found, trying text-based search...');
            
            const allElements = doc.querySelectorAll('*');
            for (let element of allElements) {
                const elementText = element.textContent || element.innerText || '';
                
                if (isQuestHeading(elementText) && elementText.length < 50) {
                    foundQuestHeading = true;
                    // Found quest marker, look for content nearby
                    let searchElement = element.parentElement || element;
                    
                    // Try to find list or paragraph content after this element
                    const nextContent = searchElement.nextElementSibling ||
                                      element.nextElementSibling ||
                                      searchElement.querySelector('ul, ol, p, div');
                    
                    if (nextContent) {
                        const nextText = nextContent.textContent.trim();
                        if (nextText.length > 0 && isMeaningfulQuestContent(nextText)) {
                            questContainer = nextContent;
                            break;
                        }
                    }
                }
            }
        }
        
        // Process the found quest container
        if (questContainer) {
            console.log('Processing quest container:', questContainer.tagName);
            
            // Extract list items
            const listItems = questContainer.querySelectorAll('li');
            if (listItems.length > 0) {
                console.log(`Found ${listItems.length} list items`);
                listItems.forEach((item, index) => {
                    const itemText = (item.textContent || item.innerText || '').trim();
                    if (itemText && itemText.length > 3 && isMeaningfulQuestContent(itemText)) {
                        questItems.push(itemText);
                    }
                });
            }
            
            // Extract paragraphs if no list items
            if (questItems.length === 0) {
                const paragraphs = questContainer.querySelectorAll('p');
                if (paragraphs.length > 0) {
                    console.log(`Found ${paragraphs.length} paragraphs`);
                    paragraphs.forEach((p) => {
                        const pText = (p.textContent || p.innerText || '').trim();
                        if (pText && pText.length > 10 && pText.length < 1000 && isMeaningfulQuestContent(pText)) {
                            questItems.push(pText);
                        }
                    });
                }
            }
            
            // Only try text extraction if we have meaningful content and no items yet
            if (questItems.length === 0) {
                const allText = questContainer.textContent || questContainer.innerText || '';
                console.log('Extracting from raw text, length:', allText.length);
                
                // Only proceed if the text looks meaningful
                if (isMeaningfulQuestContent(allText)) {
                    // Try numbered list pattern (1. 2. 3. etc.)
                    const numberedMatches = allText.match(/\d+\.\s+[^.]*?(?=\d+\.|$)/gs);
                    if (numberedMatches && numberedMatches.length > 0) {
                        console.log(`Found ${numberedMatches.length} numbered items`);
                        numberedMatches.forEach(match => {
                            const cleanItem = match.replace(/^\d+\.\s*/, '').trim();
                            if (cleanItem.length > 5 && isMeaningfulQuestContent(cleanItem)) {
                                questItems.push(cleanItem);
                            }
                        });
                    }
                    
                    // Try bullet point patterns
                    if (questItems.length === 0) {
                        const bulletMatches = allText.match(/[-*]\s+[^\n\r]*(?:\n(?!\s*[-*])[^\n\r]*)*/g);
                        if (bulletMatches && bulletMatches.length > 0) {
                            console.log(`Found ${bulletMatches.length} bullet items`);
                            bulletMatches.forEach(match => {
                                const cleanItem = match.replace(/^[-*]\s*/, '').trim();
                                if (cleanItem.length > 5 && isMeaningfulQuestContent(cleanItem)) {
                                    questItems.push(cleanItem);
                                }
                            });
                        }
                    }
                    
                    // Try line-based extraction as last resort
                    if (questItems.length === 0) {
                        const lines = allText.split(/\r?\n/).filter(line => {
                            const trimmed = line.trim();
                            return trimmed.length > 10 && isMeaningfulQuestContent(trimmed);
                        });
                        if (lines.length > 0 && lines.length <= 10) {
                            console.log(`Found ${lines.length} meaningful text lines`);
                            questItems = lines.map(line => line.trim());
                        }
                    }
                }
            }
            
            // Extract images
            const images = questContainer.querySelectorAll('img');
            images.forEach(img => {
                let src = img.getAttribute('src');
                if (src) {
                    // Fix relative paths
                    if (src.startsWith('../')) {
                        src = src.replace('../', '');
                    }
                    questImages.push({
                        src: src,
                        alt: img.getAttribute('alt') || 'Quest image',
                        title: img.getAttribute('title') || ''
                    });
                }
            });
            
            console.log(`Extracted ${questItems.length} quest items and ${questImages.length} images`);
        } else if (foundQuestHeading) {
            console.log('Found quest heading but no meaningful content');
        } else {
            console.log('No quest container or heading found');
        }
        
        // Extract author information
        const allHeadings = doc.querySelectorAll('h1, h2, h3, h4, h5, h6');
        let authorContainer = null;
        
        for (let heading of allHeadings) {
            const headingText = heading.textContent || heading.innerText || '';
            
            if (isAuthorHeading(headingText)) {
                console.log(`Found author heading: "${headingText}"`);
                
                // Look for next meaningful content
                let nextElement = heading.nextElementSibling;
                while (nextElement) {
                    // Skip empty elements
                    if (nextElement.textContent.trim().length === 0) {
                        nextElement = nextElement.nextElementSibling;
                        continue;
                    }
                    
                    // Stop if we hit another heading
                    if (nextElement.tagName && nextElement.tagName.match(/^H[1-6]$/)) {
                        break;
                    }
                    
                    // Found author content
                    if (nextElement.textContent.trim().length > 0) {
                        authorContainer = nextElement;
                        break;
                    }
                    
                    nextElement = nextElement.nextElementSibling;
                }
                
                if (authorContainer) {
                    break; // Found author content, stop looking
                }
            }
        }
        
        // Process author information
        if (authorContainer) {
            const authorText = authorContainer.textContent || authorContainer.innerText || '';
            console.log('Processing author text:', authorText);
            
            // Split by commas and clean up
            if (authorText.trim()) {
                authors = authorText.split(',')
                    .map(author => author.trim())
                    .filter(author => author.length > 0 && author.length < 100)
                    .slice(0, 10); // Limit to reasonable number of authors
                
                console.log(`Extracted ${authors.length} authors:`, authors);
            }
        }

        return { 
            items: questItems,
            images: questImages,
            authors: authors,
            found: foundQuestHeading,  // Changed: return true if heading found, regardless of content
            hasContent: questItems.length > 0 || questImages.length > 0  // New: indicates if actual content found
        };
    }

    async function showPreview(element, filename) {
        currentPreviewTarget = element;
        
        const rect = element.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        const isMobile = viewportWidth <= 768;
        
        if (isMobile) {
            previewTooltip.style.position = "fixed";
            previewTooltip.style.left = "12px";
            previewTooltip.style.right = "12px";
            previewTooltip.style.width = "calc(100vw - 24px)";
            previewTooltip.style.maxWidth = "calc(100vw - 24px)";
            previewTooltip.style.top = (rect.bottom + 10) + "px";
            previewTooltip.style.maxHeight = "calc(100vh - " + (rect.bottom + 30) + "px)";
        } else {
            const container = document.querySelector('.container');
            const containerRect = container.getBoundingClientRect();
            previewTooltip.style.position = "absolute";
            previewTooltip.style.left = (rect.left - containerRect.left) + "px";
            previewTooltip.style.top = (rect.bottom - containerRect.top + 10) + "px";
            previewTooltip.style.width = "";
            previewTooltip.style.right = "";
            previewTooltip.style.maxWidth = "500px";
            previewTooltip.style.maxHeight = "";
        }
        
        previewTooltip.innerHTML = `
            <div class="loading">Loading quest preview...</div>
        `;
        previewTooltip.classList.add("visible");
        
        if (previewCache.has(filename)) {
            const cached = previewCache.get(filename);
            displayQuestPreview(element.textContent, cached);
            return;
        }
        
        try {
            const response = await fetch(`htmls/${filename}`);
            if (!response.ok) throw new Error('Failed to load');
            
            const htmlContent = await response.text();
            const questContent = extractQuestContent(htmlContent, filename);
            
            previewCache.set(filename, questContent);
            
            if (currentPreviewTarget === element) {
                displayQuestPreview(element.textContent, questContent);
            }
            
        } catch (error) {
            if (currentPreviewTarget === element) {
                previewTooltip.innerHTML = `
                    <div class="error">Quest preview not available</div>
                `;
            }
        }
    }

    // FIXED DISPLAY QUEST PREVIEW FUNCTION
    function displayQuestPreview(title, questContent) {
        let html = ``;
        
        if (!questContent.found) {
            // No quest heading found at all
            html += `<div class="error">Quest section not found</div>`;
        } else if (!questContent.hasContent) {
            // Quest heading found but no meaningful content
            html += `
                <div class="error">Quest content not found</div>
            `;
        } else if (questContent.items && questContent.items.length > 0) {
            // Quest content found and processed
            html += '<div class="quest-section">';
            
            questContent.items.forEach((item, index) => {
                const cleanItem = item.replace(/^\d+\.?\s*/, '').trim();
                html += `<div style="margin: 8px 0; color: var(--text-color);">${index + 1}. ${cleanItem}</div>`;
            });
            
            html += '</div>';
            
            if (questContent.images && questContent.images.length > 0) {
                html += '<div style="margin-top: 12px;">';
                questContent.images.forEach(image => {
                    html += `<img src="${image.src}" alt="${image.alt}" title="${image.title}" style="max-width: 100%; height: auto; max-height: 150px; border-radius: 4px; margin: 4px 0;">`;
                });
                html += '</div>';
            }
        } else {
            // Fallback case - shouldn't happen with new logic but keeping for safety
            html += `<div class="error">Quest preview not available</div>`;
        }
        
        // Add authors section if available
        if (questContent.authors && questContent.authors.length > 0) {
            html += `
                <div class="quest-section" 
                    style="display: flex; justify-content: flex-end; align-items: center; gap: 6px; 
                            font-size: 13px; color: var(--text-color); text-align: right;
                            border-top: 1px solid var(--border-color); padding-top: 8px; margin-top: 12px;">
                    <span style="font-weight: 600; font-style: italic;">
                        ~ Author(s): 
                    </span>
                    <span style="font-style: italic;">
                        ${questContent.authors.join(', ')}
                    </span>
                </div>
            `;
        }
        
        previewTooltip.innerHTML = html;
    }

    function hidePreview() {
        previewTooltip.classList.remove("visible");
        currentPreviewTarget = null;
    }

    function addPreviewListeners() {
        const topicLinks = document.querySelectorAll('#tutorialTable a');
        
        topicLinks.forEach(link => {
            const filename = link.getAttribute('href').replace('htmls/', '');
            
            const isMobile = window.innerWidth <= 768;
            const showDelay = isMobile ? 800 : 500;
            const hideDelay = isMobile ? 300 : 200;
            
            link.addEventListener('mouseenter', () => {
                clearTimeout(previewTimeout);
                previewTimeout = setTimeout(() => {
                    showPreview(link, filename);
                }, showDelay);
            });
            
            link.addEventListener('mouseleave', () => {
                clearTimeout(previewTimeout);
                previewTimeout = setTimeout(() => {
                    hidePreview();
                }, hideDelay);
            });
            
            if (isMobile) {
                link.addEventListener('touchstart', () => {
                    clearTimeout(previewTimeout);
                    previewTimeout = setTimeout(() => {
                        showPreview(link, filename);
                    }, showDelay);
                });
            }
        });
    }

    previewTooltip.addEventListener('mouseenter', () => {
        clearTimeout(previewTimeout);
    });

    previewTooltip.addEventListener('mouseleave', () => {
        hidePreview();
    });
    
    // Add mobile-specific event listeners to hide preview
    document.addEventListener('scroll', () => {
        if (currentPreviewTarget) {
            hidePreview();
        }
    }, { passive: true });
    
    document.addEventListener('touchstart', (e) => {
        if (currentPreviewTarget && !previewTooltip.contains(e.target)) {
            const topicLinks = document.querySelectorAll('#tutorialTable a');
            let clickedOnLink = false;
            topicLinks.forEach(link => {
                if (link.contains(e.target)) {
                    clickedOnLink = true;
                }
            });
            if (!clickedOnLink) {
                hidePreview();
            }
        }
    }, { passive: true });
    
    document.addEventListener('click', (e) => {
        const isMobile = window.innerWidth <= 768;
        if (isMobile && currentPreviewTarget && !previewTooltip.contains(e.target)) {
            const topicLinks = document.querySelectorAll('#tutorialTable a');
            let clickedOnLink = false;
            topicLinks.forEach(link => {
                if (link.contains(e.target)) {
                    clickedOnLink = true;
                }
            });
            if (!clickedOnLink) {
                hidePreview();
            }
        }
    });
    
    // Enhanced request topic functionality
    function setupRequestTopicLink() {
        const requestLink = document.getElementById('requestTopicLink');
        
        requestLink.addEventListener('click', handleRequestTopicClick);
        requestLink.addEventListener('keydown', function(e) {
            if (e.key === "Enter" || e.key === " ") {
                e.preventDefault();
                handleRequestTopicClick();
            }
        });
    }
    
    function handleRequestTopicClick() {
        const searchValue = searchBox.value.trim();
        const capitalizedValue = searchValue.charAt(0).toUpperCase() + searchValue.slice(1);
        
        const baseUrl = "https://github.com/meluron-codecafe/DevQuest/issues/new";
        const params = new URLSearchParams({
            assignees: "ankit0anand0",
            labels: "tutorials",
            projects: "",
            template: "",
            title: searchValue ? `[TUTORIAL REQUEST] ${capitalizedValue}` : "[TUTORIAL REQUEST]"
        });
        window.open(`${baseUrl}?${params.toString()}`, "_blank");
    }
    
    // Load and render data
    fetch('tutorials.csv')
    .then(response => response.text())
    .then(data => {
        const parsed = Papa.parse(data, {
            header: true,
            skipEmptyLines: true
        });
        
        tutorials = parsed.data.map(row => ({
            category: row.category || '',
            topic: row.topic || '',
            keywords: row.keywords || '',
            filename: row.html || ''
        }));
        
        assignCategoryColors();
        renderTable();
        setupRequestTopicLink();
        
        setTimeout(addPreviewListeners, 100);
    });
    
    function renderTable() {
        const searchQuery = searchBox.value.toLowerCase();
        const tableBody = document.querySelector('#tutorialTable tbody');
        const noResultsDiv = document.getElementById('noResults');
        const tableWrapper = document.querySelector('.table-wrapper');
        
        tableBody.innerHTML = '';
        
        const filteredTutorials = tutorials.filter(t =>
            (!currentCategoryFilter || t.category.toLowerCase() === currentCategoryFilter.toLowerCase()) &&
            (!searchQuery || (t.topic + ' ' + t.keywords).toLowerCase().includes(searchQuery))
        );
        
        if (filteredTutorials.length === 0) {
            tableWrapper.style.display = 'none';
            noResultsDiv.style.display = 'block';
        } else {
            tableWrapper.style.display = 'block';
            noResultsDiv.style.display = 'none';
            
            filteredTutorials.forEach(t => {
                const tr = document.createElement('tr');
                const color = categoryColorMap[t.category] || "#ddd";
                tr.innerHTML = `
                <td class="category" style="color: ${color};" data-label="Category">
                    ${t.category}
                </td>
                <td data-label="Topic"><a href="htmls/${t.filename}">${t.topic}</a></td>
                <td data-label="Keywords">${t.keywords || '-'}</td>
            `;
                tableBody.appendChild(tr);
            });
        }
    }
    
    function initializeSearchInput() {
        if (searchBox) {
            searchBox.addEventListener('input', () => {
                renderTable();
                setTimeout(addPreviewListeners, 100);
            });
        }
    }
    
    setTimeout(initializeSearchInput, 100);
</script>

</body>
</html>